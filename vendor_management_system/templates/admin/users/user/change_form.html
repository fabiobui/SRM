{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}
{{ block.super }}
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    // Aggiungi badge per il tipo di utente
    const userTypeField = document.querySelector('.field-get_user_type');
    if (userTypeField) {
        const isLdap = {% if object.is_ldap_user %}true{% else %}false{% endif %};
        const badge = document.createElement('span');
        badge.className = 'user-type-badge ' + (isLdap ? 'ldap' : 'local');
        badge.textContent = isLdap ? 'LDAP' : 'Locale';
        userTypeField.appendChild(badge);
    }
    
    // Aggiungi informazioni sui gruppi LDAP se disponibili
    {% if object.is_ldap_user %}
    const groupsSection = document.querySelector('.field-groups');
    if (groupsSection) {
        const info = document.createElement('div');
        info.className = 'help';
        info.innerHTML = '<strong>Nota:</strong> I gruppi per utenti LDAP vengono sincronizzati automaticamente dal server LDAP.';
        info.style.marginTop = '5px';
        info.style.fontStyle = 'italic';
        info.style.color = '#666';
        groupsSection.appendChild(info);
    }
    {% endif %}
});
</script>
{% endblock %}

{% block submit_buttons_bottom %}
{{ block.super }}

{% if object.is_ldap_user %}
<div class="submit-row">
    <p class="ldap-user-info">
        <strong>{% trans "Utente LDAP" %}:</strong> 
        {% trans "Questo utente Ã¨ autenticato tramite LDAP. Alcune informazioni vengono sincronizzate automaticamente dal server LDAP." %}
    </p>
</div>
<style>
.ldap-user-info {
    background-color: #e7f3ff;
    border: 1px solid #b3d9ff;
    border-radius: 4px;
    padding: 10px;
    margin: 10px 0;
    font-size: 13px;
}
</style>
{% endif %}
{% endblock %}